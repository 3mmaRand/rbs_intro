<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>An Introduction to Reproducible Analyses in R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Emma Rand" />
    <meta name="date" content="2019-06-24" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/jquery/jquery.min.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
  </head>
  <body>
    <textarea id="source">

background-image: url(pics/Royal_Society_of_Biology.png)
background-position: 50% 5%
background-size: 400px





class: inverse, center, middle

# An Introduction to Reproducible&lt;br&gt;Analyses in R
## Emma Rand&lt;br&gt;emma.rand@york.ac.uk
University of York, 2019-06-24

---

# Goal!

By the end of today you'll be able to do something like this:
&lt;!-- standard markdown report in pdf, word or html --&gt;
&lt;!-- include a table, inline code, a figure,  --&gt;

## demo.....

---
# What this workshop is and is not

.pull-left[

Is an introduction to
* the skills for organising reproducible analyses  
* R  
* some universal and highly transferable concepts  

]

.pull-right[

It is not
* An introduction to statistics&lt;sup&gt;1&lt;/sup&gt;  
* Magic  
]

[1] but ...
---
# Workshop overview


<div id="htmlwidget-d2b559d19322e99da2e1" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-d2b559d19322e99da2e1">{"x":{"filter":"none","fillContainer":false,"data":[["0930","1000","1115","1230","1315","1430","1445","1600"],["Registration and Coffee","Introduction","Working with Data","Lunch","Reproducible Reports using R Markdown","Coffee","Working with your own data","Departure"],["Assistance with installation of R and RStudio if needed.","Finding your way round RStudio, typing in data, performing calculations and making a simple figure.  Using the manual.","Importing, visualising and summarizing data, the concept of 'tidy' data and some typical data tidying tasks.","","More advanced figures, Organising analyses, updatable reports in a variety of output formats.","","Create a report and figure for your data or use one of our examples.",""]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th>Time<\/th>\n      <th>Topic<\/th>\n      <th>Detail<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":4,"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[4,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>

---

# Before Lunch

## Introduction 1000 - 1115

* Rationale for scripting  
* Why use R to script  
* Finding your way round RStudio  
* Typing in data, doing some calculations on it, plotting it
* Understanding the manual  

---

# Before Lunch

## Introduction 1000 - 1115
* Rationale for scripting  
* Why use R to script  
* Finding your way round RStudio  
* &lt;mark style="background-color: #e6f0ff"&gt;Typing in data, doing some calculations on it, plotting it&lt;/mark&gt;
* Understanding the manual  

---
background-image: url(pics/tidyverse_logo.png)
background-position: 95% 5%
background-size: 200px

# Before Lunch

**Introduction 1000 - 1115** 
* Rationale for scripting  
* Why use R to script  
* Finding your way round RStudio  
* Typing in data, doing some calculations on it, plotting it
* Understanding the manual  

**Working with Data 1115 - 1230**  

* Importing data  
  * working directories and paths  
* Summarising and visualising with the [`tidyverse`](https://www.tidyverse.org/)  
* Installing and loading packages
* The concept of 'tidy'&lt;sup&gt;1&lt;/sup&gt; data

&lt;small&gt;[1] Wickham, H. (2014), "Tidy Data," Journal of Statistical Software, 59, available at [http://www.jstatsoft.org/article/view/v059i10](http://www.jstatsoft.org/article/view/v059i10)&lt;/small&gt;

---
class: inverse, center, middle
# Introduction 1000 - 1115

---
background-image: url(pics/rationale1.png)
background-position: 50% 35%
background-size: 600px

# Rationale for scripting analysis

---
background-image: url(pics/rationale2.png)
background-position: 50% 35%
background-size: 600px

# Rationale for scripting analysis

---
background-image: url(pics/rationale3.png)
background-position: 50% 35%
background-size: 600px

# Rationale for scripting analysis

---

background-image: url(pics/rationale5.png)
background-position: 50% 35%
background-size: 800px

# Rationale for scripting analysis

---

## Why R? 

* Open source and free  

--
  But so is Python
  
--

* R caters to users who do not see themselves as programmers, but then allows them to slide gradually into programming  

* Language for data analysis and graphics  

--
* Community - welcoming, inclusive.  
  [RForwards](https://forwards.github.io/)  
  [RLadies](https://rladies.org/)
  
--

* R Markdown  
  R's "killer feature"  
  Super-charged reproducibility!

---

# Finding your way round RStudio

**Live demonstration**

Overview [Larger](http://www-users.york.ac.uk/~er13/RStudio%20Anatomy.svg)

&lt;img src="http://www-users.york.ac.uk/~er13/RStudio%20Anatomy.svg" width="600px" /&gt;


There is an [RStudio cheatsheet](rstudio-ide.pdf) which covers more advanced RStudio features.

---

# Finding your way round RStudio

**Live demonstration**

* the panels
* making yourself comforatable
* types of of R files: .R, .RData . RHistory
* typing in the console sending commands
* using R as a calculator
* assigning values
* where to see objects
* using a script - typing doesn't make it happen, sending commands, highlighting
* data types and structures
* `c()`, `class()` and `str()`


---
# Finding your way round RStudio

**Summary of Live demonstration: &lt;mark style="background-color: #e6f0ff"&gt;The panels&lt;/mark&gt;**

.pull-left[
Top left
* Script - where you write, edit and save code and comments you want to keep  
  
---
Bottom left  
* console - commands get executed here and can be typed here  
]

.pull-right[
Top right
* Environment - where to see your ojects  
* History - a list of every command you sent  
--- 
Bottom right  
* Files - a file explorer  
* Packages - the packages you have installed and a method of installing packages  
* Help - the manual  
* Plots - where your plots go  
]

---
# Finding your way round RStudio

**Summary of Live demonstration: &lt;mark style="background-color: #e6f0ff"&gt;Types of R files&lt;/mark&gt;**

* .R 
  a script file:  code (to save) and comments
* .RData  
  a environment file also know as a workspace: objects but no code
* .RHistory  (everything you typed, mostly wrong!)
 
**Using a script**  
* any R code can be executed from a script
* code can be (should be!) commented  
* comments start with a `#`

---
# Finding your way round RStudio

**Summary of Live demonstration: &lt;mark style="background-color: #e6f0ff"&gt;Data types and structures&lt;/mark&gt;**

These are the most commonly needed but there are others
.pull-left[
Types
* numeric
* integer
* logical
* character
]
.pull-right[
Structures
* vectors
* factors
* dataframes
]

---

# We are here

## Introduction 1000 - 1115
* Rationale for scripting  
* Why use R to script  
* Finding your way round RStudio  
* &lt;mark style="background-color: #e6f0ff"&gt;Typing in data, doing some calculations on it, plotting it&lt;/mark&gt;
* Understanding the manual  

--

For slides purposes called...
### &lt;mark style="background-color: #e6f0ff"&gt;Typing in data, calcs, plots&lt;/mark&gt;

---
# Typing in data, calcs, plots
## The goal
We will work some data on the number of males in 64 bird nests with a clutch size of 5.
--
.pull-left[
You are going to make this data, find the mean number of males per nest...
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; No. males &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; No. nests &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 14 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 15 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 13 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]
--
.pull-right[
... and plot it


![](slides_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;
]


---
# Typing in data, calcs, plots

## Getting set up

In Windows explorer, make yourself a folder for this work.  

--

&lt;mark style="background-color: #e6f0ff"&gt;Make a note of it!&lt;/mark&gt;

--

In RStudio, [set your working directory](pics/menusetwd.png) to the folder you created above.  

--

Make a [new script](pics/newscript.png) file called RBS_am.R to carry out the rest of the work.  

---
# Typing in data, calcs, plots

## Putting the data into R data structures

Make a vector `n` that holds the numbers 0 to 5. 

```r
n &lt;- c(0, 1, 2, 3, 4, 5)
```


* Write your command in the script file  
* Make sure you have your cursor on the line you want to execute  
* Run it using the ![Run](pics/runbutton.png) button or doing Ctrl+Enter&lt;sup&gt;1&lt;/sup&gt;. 

&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  

&lt;small&gt;[1] Ctrl+Enter is the default shortcut to run the current line or selection. I prefer to set to Ctrl+R&lt;/small&gt;
---
# Typing in data, calcs, plots

## Putting the data into R data structures

Let's take a look at it using `str()` (structure) and `class()`&lt;sup&gt;1&lt;/sup&gt;:


```r
class(n)
```

```
## [1] "numeric"
```

```r
str(n)
```

```
##  num [1:6] 0 1 2 3 4 5
```
It's a numeric vector []

&amp;nbsp;  

&lt;small&gt;[1] These commands are useful to check what data type you're working with&lt;/small&gt;

---
# Typing in data, calcs, plots

## Putting the data into R data structures

Now create a vector called `freq` containing the numbers of nests with 0 to 5 males. 


```r
freq &lt;- c(4, 13, 14, 15, 13, 5)
```
--
We can use `sum(freq)` to check we get the total number of nests expected, 64


```r
sum(freq)
```

```
## [1] 64
```

---
# Typing in data, calcs, plots

## Finding the mean
Our data is in the form of a frequency table so to find the mean number of males per nest we need find the total number of males like this:
.pull-left[
&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; No. males &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; No. nests &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; No. males *No. nests &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 0 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 1 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 2 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 14 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 28 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 3 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 15 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 45 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 4 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 13 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 52 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 5 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 25 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;font-weight: bold;background-color: #C0C2C9 !important;"&gt; Total &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;background-color: #C0C2C9 !important;"&gt; 64 &lt;/td&gt;
   &lt;td style="text-align:left;font-weight: bold;background-color: #C0C2C9 !important;"&gt; 163 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

.pull-right[

`$$\frac{163}{64} = 2.55$$`
]

---
# Typing in data, calcs, plots

## Finding the mean

.pull-left[
Find the total number of nests

```r
total_nests &lt;- sum(freq)
```
 

Find the total number of males

```r
total_males &lt;- sum(n * freq)
```
 

Find the mean number of males per nest

```r
total_males/total_nests
```

```
## [1] 2.546875
```
]

--

.pull-right[

R works 'elementwise' unlike most programming lanaguges.  
` n * freq`
gives

`$$\begin{bmatrix}0\\1\\2\\3\\4\\5\end{bmatrix}\times\begin{bmatrix}4\\13\\14\\15\\13\\5\end{bmatrix}=\begin{bmatrix}0\\13\\28\\45\\52\\25\end{bmatrix}$$`

It was designed to make it easy to work with data.
]


---
# Typing in data, calcs, plots

## Plotting
.pull-left[
Now for our first figure using the base&lt;sup&gt;1&lt;/sup&gt; plotting function `barplot()`.  

Making default figures is often easy - useful if you just want to quickly explore your data.
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&lt;small&gt;[1] the 'base' plotting system is part of the base distribution, _i.e.,_ all the packages that come with the basic installation of R.&lt;/small&gt;
]

--

.pull-right[
Create simple barplot like this:


```r
barplot(freq)
```

![](slides_files/figure-html/unnamed-chunk-13-1.png)&lt;!-- --&gt;

]
---
# Using the help manual

The default barplot doesn't have:
* labels to say what each bar represents  
* axis labels

'Arguments' can be added to the `barplot()` command.  

Commands do something with/to an object and their arguments specify:
* what object to do it to  
* how exactly to do it  

Many commands have defaults so you need only supply an object.

--

Open the manual page using:

```r
?barplot
```

---
# Using the help manual

## Key points

* **Description** an overview of what the command does  

* **Usage** lists argument    
  * format: argument name = default value  
  * some arguments MUST be supplied, they have no defaults
  * ... essentially, etc

* **Arguments** gives the detail on how the arguments work

* **Details** decribes how the command works in more detial  

* **Value** gives the output of the command 

* Don't be too perturbed by not fully understanding the information

---
# Typing in data, calcs, plots

## Plotting
.pull-left[


```r
barplot(freq, names.arg = n)
```

![](slides_files/figure-html/unnamed-chunk-15-1.png)&lt;!-- --&gt;
]


--
.pull-right[
We can add names using the `names.arg` argument.

The names of the bars are the numbers of males in a nest. These are in our variable `n`

Arguments are separted by commas 

`command(argument1, argument2, argument3, ...)`

]

---

# Typing in data, calcs, plots

## Plotting

.pull-left[
Can you use the manual to add labels for both axes?

Skip to the next slide if you want more challenge.

]
--

.pull-right[

```r
barplot(freq, 
        names.arg = n,
        xlab = "Number of males",
        ylab = "Number of nests")
```

![](slides_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;
]
---

# Typing in data, calcs, plots

## Plotting

.pull-left[
Can you use the manual to add labels for both axes?

Skip to the next slide if you want more challenge.

&lt;style&gt;
div.blue { background-color:#e6f0ff; border-radius: 5px; padding: 20px;}
&lt;/style&gt;

&lt;div class = "blue"&gt;
**Top Tip** 

Make your code easier to read by using white space and new lines
* put spaces around `=` , `-&gt;` and after `,`
* use a newline after every comma in a command with lots of arguments
]
&lt;/div&gt;

.pull-right[

```r
barplot(freq, 
        names.arg = n,
        xlab = "Number of males",
        ylab = "Number of nests")
```

![](slides_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;
]

---

# Plotting - extra challenges

.pull-left[
Make all the bars red.

Colours can be given by their name: "red" 

Or by their hexadecimal code: "#FF3030".  

You can look these up as follows:  

[By colour name](pics/colournames.pdf)

[By hexadecimal code](pics/colourhex.pdf)

]

--

.pull-right[

```r
barplot(freq, 
        names.arg = n,
        xlab = "Number of males",
        ylab = "Number of nests",
        col = "#FF3030")
```

![](slides_files/figure-html/unnamed-chunk-18-1.png)&lt;!-- --&gt;
]
---
# Plotting - extra challenges

.pull-left[
Make the bars alternating red, blue, and yellow. 

To solve this you will need to put together the concept of setting an argument with the concept of collecting several things together to make one thing.

]

--

.pull-right[

```r
barplot(freq, 
        names.arg = n,
        xlab = "Number of males",
        ylab = "Number of nests",
        col = c("red", "blue", "yellow"))
```

![](slides_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;
]
---

background-image: url(pics/ggplot.jpg)
background-position: 95% 5%
background-size: 100px

# Typing in data, calcs, plots

## Plotting using `ggplot2`

The `barplot()` command is part the 'base' plotting system. Base packages (collections of commands) always come with R. 

--

Other packages, such as [ggplot2](https://ggplot2.tidyverse.org/)&lt;sup&gt;1&lt;/sup&gt; need to be added ('installed').

&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  
&amp;nbsp;  

&lt;small&gt;[1] A fantastic plotting system which has a common conceptual framework for visualisation based on [The Grammar of Graphics](https://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448/ref=as_li_ss_tl?ie=UTF8&amp;qid=1477928463&amp;sr=8-1&amp;keywords=the+grammar+of+graphics&amp;linkCode=sl1&amp;tag=ggplot2-20&amp;linkId=f0130e557161b83fbe97ba0e9175c431)&lt;/small&gt;
---
# Packages

## Installing - you only do once

I recommend installing all of the `tidyverse` packages


```r
install.packages("tidyverse")
```
--

## Loading - you do once each R session

To use a package which has already been installed you need to 'add it to your library' with the `library()` command.



```r
library(tidyverse)
```
`tidyverse` includes `ggplot2` as well as `dplyr` and `tidyr` functions from which we will also use.

---

background-image: url(pics/ggplot.jpg)
background-position: 95% 5%
background-size: 100px

# Plotting using `ggplot2`

`ggplot2` is the name of the package

`ggplot()` is its most important command

Using `ggplot2` might seem more complex than the base plotting system at first. 

However, graphs only need to get very slightly more involved for it to become much easier to use.

--

`barplot()` needs a vector of bar heights

`ggplot()` needs a dataframe
---

background-image: url(pics/ggplot.jpg)
background-position: 95% 5%
background-size: 100px

# Plotting using `ggplot2`

First, make sure you have a dataframe.

We need to make one from `n` and `freq`


```r
nest_data &lt;- data.frame(n, freq)
```

--
And check

```r
str(nest_data)
```

```
## 'data.frame':	6 obs. of  2 variables:
##  $ n   : num  0 1 2 3 4 5
##  $ freq: num  4 13 14 15 13 5
```

--

`nest_data` is just a name we have given the dataframe

Click on `nest_data` in the Environment pane to see a spreadsheet-like view of it.

---
background-image: url(pics/ggplot.jpg)
background-position: 95% 5%
background-size: 100px

# Plotting using `ggplot2`

Create a simple barplot using `ggplot` like this:


```r
ggplot(data = nest_data, aes(x = n, y = freq)) +
  geom_bar(stat = "identity")
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
]

--

.pull-right[
`ggplot()` alone creates a blank plot. 

`ggplot(data = nest_data)` looks the same. 

`aes()` gives the 'Aesthetic mappings'. How variables (columns) are mapped to visual properties (aesthetics) e.g., axes, colour, shapes.

`ggplot(data = nest_data, aes(x = n, y = freq))` produces a plot with axes 

`geom_bar` A 'Geom' (Geometric object) gives the visual representations of the data: points, lines, bars, boxplots etc.

]

---
background-image: url(pics/ggplot.jpg)
background-position: 95% 5%
background-size: 100px

# Plotting using `ggplot2`

You can add an axis label like this:


```r
ggplot(data = nest_data, aes(x = n, y = freq)) +
  geom_bar(stat = "identity") +
  xlab("Number of males")
```
.pull-left[
![](slides_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;
]

--

.pull-right[
Each 'layer' is added to the `ggplot()` command with a `+`

--

&lt;div class = "blue"&gt;

**We can customise much more and will return to this later.....**

&lt;div&gt;

&lt;small&gt;[ggplot cheatsheet](https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf) if you can't wait&lt;/small&gt;

]

---

class: inverse, center, middle

# Working with Data
## 1115 - 1230


---
# Working with Data
## The goal

&lt;table&gt;
 &lt;thead&gt;
&lt;tr&gt;
&lt;th style="border-bottom:hidden" colspan="2"&gt;&lt;/th&gt;
&lt;th style="border-bottom:hidden; padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2"&gt;&lt;div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; "&gt; Interorbital distance&lt;/div&gt;&lt;/th&gt;
&lt;/tr&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Population &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; N &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; Mean &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SE &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.2400 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1170032 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.7025 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0906167 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
.pull-left[
![](slides_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;
]
.pull-right[
![](slides_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;
]

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Importing

**The Data**

Measurements of interorbital width (in mm) in 40 domestic pigeons measured to the nearest 0.1 mm

Save a copy [pigeon.txt](data/pigeon.txt)

--

Import the data in to R with `read.table()`:


```r
pigeon &lt;- read.table("pigeon.txt", header = TRUE)
```


--
`header = TRUE` is an argument in the `read.table()` command which indicates that the datafile has a header, _i.e._, the first value in the file is the variable name

--

You should see an object `pigeon` in the Environment window. 

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable
## Importing

Examine the structure


```r
str(pigeon)
```

```
## 'data.frame':	40 obs. of  1 variable:
##  $ interorbital: num  12.2 12.9 11.8 11.9 11.6 11.1 12.3 12.2 11.8 11.8 ...
```

The object created by `read.table()` is a dataframe. 

That's handy! 

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Understanding a dataframe 

A dataframe is made of columns and rows

The columns are the variables; the rows are the observations

--

So to output all of the one column we can use:

```r
pigeon$interorbital
```

```
##  [1] 12.2 12.9 11.8 11.9 11.6 11.1 12.3 12.2 11.8 11.8 10.7 11.5 11.3 11.2
## [15] 11.6 11.9 13.3 11.2 10.5 11.1 12.1 11.9 10.4 10.7 10.8 11.0 11.9 10.2
## [29] 10.9 11.6 10.8 11.6 10.4 10.7 12.0 12.4 11.7 11.8 11.3 11.1
```
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Summarising single group data  

R provides many functions to allow you to make calculations on your data.

For example, the mean

```r
mean(pigeon$interorbital)
```

```
## [1] 11.48
```

--

Which functions will calculate the standard deviation and the number of cases, _i.e._, the length of the column
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Summarising single group data 

Standard deviation

```r
sd(pigeon$interorbital)
```

```
## [1] 0.6917833
```

--

Number of cases

```r
length(pigeon$interorbital)
```

```
## [1] 40
```
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Plotting single group data 


```r
ggplot(data = pigeon, aes(x = interorbital)) +
  geom_histogram() +
  xlab("Interorbital distance (mm)")
```

![](slides_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: single variable 
## Plotting single group data 


```r
ggplot(data = pigeon, aes(x = interorbital)) +
*  geom_histogram(bins = 10, col = "black") +
  xlab("Interorbital distance (mm)")
```
.pull-left[
![](slides_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;
]
--

.pull-right[

We will cover more figure options as we go through the afternoon
]

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: two variables 
## Importing 2

This section will teach you about three concepts:

1. 'working directories', 'paths' and  'relative paths' 
2. dealing with data in more than group  
3. the concept of 'tidy' data

We will work with the interorbital distances of domestion pigeons in two two different populations: A and B

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: two variables 
## Importing 2

It is good practice to organise your files into a folder structure. 

For example, I often use:

![a folder stemcells with 4 subfolders - figures, processed data, raw data and scripts](pics/dir_structure.png)

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: two variables 
## Importing 2

Make a folder in your working directory called 'data'

Forgotten where you are? Use

```r
getwd()
```

--

Save a copy of [pigeon2.txt](../data/pigeon2.txt) to the 'data' folder


---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: two variables 
## Importing

To read the data in to R you need to use the 'relative path' to the file in the `read.table()` command:


```r
pigeon2 &lt;- read.table("data/pigeon2.txt", header = TRUE)
```

--

The `data/` part is the 'relative path' to the file. 

--

It says where the file is **relative to your working directory**

pigeon2.txt is inside a folder (directory) called 'data' which is in your working directory.

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data: two variables 
## Importing

Look at the structure of the dataframe pigeon2 using `str()`


```r
str(pigeon2)
```

```
## 'data.frame':	40 obs. of  2 variables:
##  $ A: num  12.4 11.2 11.6 12.3 11.8 10.7 11.3 11.6 12.3 10.5 ...
##  $ B: num  12.6 11.3 12.1 12.2 11.8 11.5 11.2 11.9 11.2 12.1 ...
```
--

It's a dataframe with two variables (columns) called A and B

The datatype of both variables is numeric.

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px


# Working with Data: two variables 
## Summarising multi-group data

Find the mean for each population. 

Remember, to refer a column inside a dataframe (a single column data) we need to use the dollar notation: `dataframe$columnname`

--

The mean of column $A


```r
mean(pigeon2$A)
```

```
## [1] 11.24
```

The mean of column $B


```r
mean(pigeon2$B)
```

```
## [1] 11.7025
```

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Tidy format

Instead of having a population in each column, we very often have, **and want**, data organised so the measurements are all in one column and a second column gives the group. This format is described as 'tidy'&lt;sup&gt;1&lt;/sup&gt;
Tidy data has a variable in each column and only one observation (case) per row.

.pull-left[
**NOT TIDY!**
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; A &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; B &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 12.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.6 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 11.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 11.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 12.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.2 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]


.pull-right[
**TIDY!**
&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; population &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; distance &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10.0 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.2 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 11.3 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; B &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12.6 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
]

&amp;nbsp;  
&lt;small&gt;[1] Wickham, H. (2014), "Tidy Data," Journal of Statistical Software, 59, available at [http://www.jstatsoft.org/article/view/v059i10](http://www.jstatsoft.org/article/view/v059i10)&lt;/small&gt;

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Tidy format

We can make the data tidy with `gather()`&lt;sup&gt;1&lt;/sup&gt;.

`gather()` needs 3 arguments:
--

* the dataframe 
--

* a `key` the grouping variable 
--

* a `value` the measurement variable.
--


```r
pigeon3 &lt;- gather(data = pigeon2, key = population, value = distance)
str(pigeon3)
```

```
## 'data.frame':	80 obs. of  2 variables:
##  $ population: chr  "A" "A" "A" "A" ...
##  $ distance  : num  12.4 11.2 11.6 12.3 11.8 10.7 11.3 11.6 12.3 10.5 ...
```

&amp;nbsp;
&amp;nbsp;

&lt;small&gt;[1] `gather()` is a function from a package called `tidyr` which is one of the `tidyverse` packages&lt;/small&gt;

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Summarising multi-group data

Now we have a dataframe in tidy format which will make it easier to summarise, analyse and visualise.

How can we summarise now?

--

If we use 

```r
mean(pigeon3$distance)
```

```
## [1] 11.47125
```

We will get the mean of the two populations combined.
--

To get the mean of each population we use `tapply()`. 

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Summarising multi-group data

`tapply()` takes three arguments: 
--

* the measurement variable 
--

* the grouping variable   
--

* function to be applied:  

`tapply(measurement, grouping, function)`
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Summarising multi-group data


```r
tapply(pigeon3$distance, pigeon3$population, mean)
```

```
##       A       B 
## 11.2400 11.7025
```

--

Find the number of cases and the variance of each group

--

The number of cases

```r
tapply(pigeon3$distance, pigeon3$population, length)
```

```
##  A  B 
## 40 40
```

--
The variance


```r
tapply(pigeon3$distance, pigeon3$population, var)
```

```
##         A         B 
## 0.5475897 0.3284551
```

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Summarising multi-group data

Calculate the standard errors for each group.
Standard errors are given by 

$$s.e. = \frac{s.d.}{\sqrt{n}} $$
where `\(s.d.\)` is the standard deviation of a sample and `\(n\)` is the size of the sample.
--

You will need to
* calculate and assign the standard deviations to variable
* calculate and assign the number of cases to variable
* find out what function finds the squareroot of its argument
* apply what you know about the elementwise way R works

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Summarising multi-group data

Calculate the standard errors for each group.


```r
sds &lt;- tapply(pigeon3$distance, pigeon3$population, sd)
ns &lt;- tapply(pigeon3$distance, pigeon3$population, length)
ses &lt;- sds / sqrt(ns)
ses
```

```
##          A          B 
## 0.11700318 0.09061666
```
--

To round

```r
round(ses, 3)
```

```
##     A     B 
## 0.117 0.091
```

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
ggplot(data = pigeon3, aes(x = distance)) +
  geom_histogram(bins = 10, col = "black") +
  xlab("Interorbital distance (mm)")
```

![](slides_files/figure-html/unnamed-chunk-56-1.png)&lt;!-- --&gt;

---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data



```r
*ggplot(data = pigeon3, aes(x = distance, fill = population)) +
  geom_histogram(bins = 10, col = "black") +
  xlab("Interorbital distance (mm)")
```


.pull-left[

![](slides_files/figure-html/unnamed-chunk-58-1.png)&lt;!-- --&gt;
]

--

.pull-right[

We need only 'map' the population variable to the 'use the `fill` aesthetic 

Aesthetics include:
* x
* y
* color
* fill
* shape
* size
* alpha

]
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
ggplot(data = pigeon3, aes(x = distance, fill = population)) +
*  geom_density(col = "black") +
  xlab("Interorbital distance (mm)")
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-60-1.png)&lt;!-- --&gt;
]

--

.pull-right[

Changing the `geom` from `geom_histogram()` to `geom_density()`

]
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
ggplot(data = pigeon3, aes(x = distance, fill = population))  +
*  geom_density(col = "black", alpha = 0.3) +
  xlab("Interorbital distance (mm)")
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-62-1.png)&lt;!-- --&gt;
]


.pull-right[

And altering the transparancy using `alpha`

]
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
ggplot(data = pigeon3, aes(x = distance, fill = population))  +
  geom_density(col = "black", alpha = 0.3) +
  xlab("Interorbital distance (mm)") +
*  theme_classic()
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-64-1.png)&lt;!-- --&gt;
]


.pull-right[

And using a built in `theme()` to make it more publication friendly.

]
---
background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
*ggplot(data = pigeon3, aes(x = population, y = distance))  +
*  geom_point() +
  xlab("Population") +
  ylab("Interorbital distance (mm)")
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-66-1.png)&lt;!-- --&gt;
]


.pull-right[

Instead of plotting the distribution, we can plot the which population it is on the _x_-axis and the distances on the _y_-axis **as points**

]

---

background-image: url(pics/interorbital.png)
background-position: 95% 5%
background-size: 200px

# Working with Data 
## Plotting multi-group data


```r
ggplot(data = pigeon3, aes(x = population, y = distance))  +
*geom_violin() +
  xlab("Population") +
  ylab("Interorbital distance (mm)") + 
  theme_classic()
```

.pull-left[
![](slides_files/figure-html/unnamed-chunk-68-1.png)&lt;!-- --&gt;
]


.pull-right[

Instead of plotting the distribution, we can plot the which population it is on the _x_-axis and the distances on the _y_-axis...**as a volin plot**

]

---
class: inverse, center, middle

# Lunch!

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
